# 什么是OpenAPI

OpenAPI 是指开放应用程序编程接口（Open Application Programming Interface）的简称。阿里云OpenAPI为开发者提供了一系列开放的应用程序接口，使您可以通过这些应用程序接口来方便的管理云上资源、数据和服务等内容。

API可以视为一层封装，它允许开发人员访问和使用某些功能或数据，而无需了解背后的详细实现，API 文档是API的使用手册，包含如何构建API请求和响应有关的信息。阿里云OpenAPI则是提供给开发者的一系列开放的应用程序接口，使得开发者可以通过这些应用程序接口来管理云上资源、数据和服务等内容。

## 什么是OpenAPI集成？

API 集成是通过API把不同的软件应用、系统或服务联结在一起的过程，旨在促进数据共享、整合各种功能以及实现工作流程的自动化。这样的集成不仅优化了信息交流与资源利用，而且加强了应用间的协同作用，极大提高了操作效率和用户体验。例如上传存储数据、根据特定要求获取数据等。

企业可以灵活使用服务商提供的 OpenAPI 来高效自动执行许多系统功能，例如自动化ECS实例部署、配置和管理VPC，新部署ECS实例到特定的VPC和子网中。另外还有个深入人心的生活场景：C端用户通过点击发送验证码短信，背后即是程序开发者集成了短信服务API，来使端到端业务更加自动化。下图是用户从客户端发起一个OpenAPI调用请求到接收来自阿里云服务响应数据的完整时序图。

![image-20240510104052269](image/image-20240510104052269.png)

## 集成OpenAPI有什么优势？

集成 OpenAPI 在云计算领域中带来的优势是多方面的，主要优势如下：

1. 自动化和效率提升：

   “自动化”概念总是随着提到OpenAPI而同时出现。通过集成OpenAPI，企业能够自动执行诸如资源部署、管理和监控等“重复性高且耗时”的任务，以提升业务的管理效率。这种自动化不仅减少了人为错误，还使得资源利用更加灵活和高效，尤其是在面对业务高峰时，可以迅速调整资源以满足需求。

2. 灵活性和易扩展性：

   OpenAPI 提供了与云服务供应商平台深度集成的能力，让外部企业或任何体量的开发者能够无缝地扩展功能和服务。通过编程方式访问和操纵云资源，利用API的灵活性，企业可以轻松实现与第三方服务和系统的集成，进一步扩展其服务生态。例如您经营一家在线电商平台，随着企业业务的发展，您需要一个更加灵活和可扩展的系统来应对不断增长的用户访问量、商品数据和交易处理需求。例如您可以借助阿里云ECS相关的OpenAPI动态增加计算资源。在流量高峰到来前，自动通过API部署并启动新的ECS实例，扩展后端服务的能力；而在流量回落后，通过API停用并释放这些额外的资源，优化成本支出。

3. 成本优化：

   利用 OpenAPI 实现的自动化能力使企业能够根据实际使用量动态地调整资源，避免了资源过度配置和浪费。以按需计费为基础的云计算服务结合API自动化管理，能够帮助企业更精确地预测和控制成本，从而实现成本优化和资源效率的最大化。

集成 OpenAPI 的这些优势在云计算领域内为企业带来了显著的竞争优势，无论是在提升操作效率、降低成本还是快速响应市场变化等方面都发挥着重要作用。此外，随着云服务供应商不断完善和扩展其OpenAPI的功能，未来这些优势将更加凸显。



# 身份、凭据与授权

身份是指用户在系统中的唯一标识符，凭据是指用户证明其身份的一组信息，而授权是决定一个已验证身份的用户拥有操作特定资源的权限的过程。通过身份、凭据、授权即可确保用户身份的安全性和控制用户对资源的访问权限。

## 身份

身份是指用户在系统中的唯一标识符，通过身份，系统可以识别用户的身份，确定其操作权限。阿里云的身份类型主要有：阿里云账号，RAM用户，RAM角色。

- 阿里云账号

  阿里云账号（主账号）是阿里云资源归属、资源使用计量计费的基本主体。阿里云账号为其名下所拥有的资源付费，并对其名下所有资源拥有完全控制权限。除了一些要求必须使用阿里云账号的场景外，我们建议您使用RAM用户或RAM角色身份访问控制台和调用OpenAPI。

- RAM用户

  RAM用户是RAM的一种实体身份类型，有确定的身份ID和身份凭证，它通常与某个确定的人或应用程序一一对应。更多详情，请参见[RAM用户概览](https://help.aliyun.com/zh/ram/user-guide/overview-of-ram-users)。

- RAM角色

  RAM角色是一种虚拟用户，可以被授予一组权限策略。与RAM用户不同，RAM角色没有永久身份凭证（登录密码或访问密钥），需要被一个可信实体扮演。扮演成功后，可信实体将获得RAM角色的临时身份凭证，即安全令牌（STS Token），使用该安全令牌就能以RAM角色身份访问被授权的资源。

  例如：阿里云账号 A 开放了一个 RAM 角色`a_rr1`，授权 OSS 产品的`FullAccess`，将该 RAM 角色的扮演者指定为阿里云账号 B 的 RAM 用户`b_ru1`。那么开发者可通过登录 B 账号的 RAM 用户`b_ru1`，通过角色扮演 A 账号的`a_rr1`，管理 A 账号的 OSS 资源。


## 凭据

凭据是指用户证明其身份的一组信息。用户在系统中进行登录时，需要提供正确的凭据才能验证身份。常见的凭据类型有：

- 阿里云主账号和RAM用户的永久凭据 AccessKey（简称AK）。一组由AccessKey ID和AccessKey Secret组成的密钥对。

  **警告**

  由于主账号 AK 有资源完全的权限，一旦泄露风险巨大。建议您使用RAM用户的AccessKey，并设置定期轮换，创建RAM用户AccessKey的方法请参见[创建AccessKey](https://help.aliyun.com/zh/ram/user-guide/create-an-accesskey-pair)。

- 阿里云RAM角色的STS临时访问Token，简称STS Token。它是可以自定义时效和访问权限的临时身份凭据，更多详情，请参见[什么是STS](https://help.aliyun.com/zh/ram/product-overview/what-is-sts)。

  **说明**

  临时身份凭证只有一定的时效，若过期失效，需要再次调用 STS 获取最新的 STS Token。

- Bearer Token。它是一种身份验证和授权的令牌类型。目前只有云呼叫中心[CCC](https://api.aliyun.com/api/CCC/2020-07-01/ListPrivilegesOfUser)这款产品支持Bearer Token的凭据初始化方式。您可在***鉴权方式配置\***选择Bearer Token方式。

凭据如果发生泄漏，可能会给云上资源及业务带来巨大的安全隐患，日常运维管理要尤其注意凭据的安全使用。更多详情，请参见[凭据的安全使用方案](https://help.aliyun.com/zh/openapi/accesskey-security-solution)。

## 授权



# 服务接入点

## 服务接入点（Endpoint）

服务接入点是访问阿里云服务的入口点，分公网接入地址和VPC接入地址。服务接入点通常是一个 URL，它指定了服务的访问协议、主机名、端口和路径等信息，客户端可以使用这些信息与服务进行通信。比如 `https://ram.aliyuncs.com`就是[访问控制 RAM](https://help.aliyun.com/zh/ram/product-overview/what-is-ram) 对外提供的服务接入点。

## 公网接入地址 & VPC接入地址

公网接入地址在全球都可访问。VPC接入地址只有在阿里云对应的地域内，且是VPC网络类型才可访问。

VPC地址的好处：

- 高安全性：VPC服务地址只能在VPC内部访问，提供更高的安全性和隐私性。
- 更快的响应速度：由于VPC服务地址在VPC内部网络中运行，其响应速度通常比公网服务更快，且可以避免公网延迟和带宽限制等问题。
- 更低的成本：VPC服务地址可以使用内部网络通信。

## 部署类型&接入点域名

一个云产品将服务部署在一个地域，称之为中心化部署；将服务部署在多个地域，则称之为区域化部署。不论是什么类型的部署，云服务都提供了Endpoint作为OpenAPI的入口。

- 对于中心化部署，它的Endpoint为 `<service code>.aliyuncs.com` 的形式。以IMS为例，它的Endpoint是 `ims.aliyuncs.com`。
- 对于区域化部署，它的Endpoint为 `<service code>.<region id>.aliyuncs.com` 的形式。以STS为例，它在杭州的Endpoint为 `sts.cn-hangzhou.aliyuncs.com` ，在北京的Endpoint为 `sts.cn-beijing.aliyuncs.com`。