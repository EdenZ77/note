## 个人信息

> 学校，java，体量大，性能优化，两年，云原生，云平台，后端项目重构，服务拆分，降低 30%，性能提升。个人，博客

+ 余游洋 / 男 / 25岁 / 本科
+ 工作经验：4年
+ 技术博客：[https://yuyy.info](https://yuyy.info/)
+ 联系方式：yuyy114@126.com / 17626482596
+ 期望职位：Golang

---

## 工作经历

### 天空卫士网络安全技术有限公司（2022.02 - 至今）

+ 岗位：云平台开发工程师

+ 开发基于 K8s 的云平台，承载公司数据安全产品，提供 SaaS 能力。

+ 负责团队开发工作中的设计评审、code review 等工作。

+ 负责 DevOps 落地，目前已经在公司内部推广并应用到日常开发中。

+ Go代码工程化规范的调研和推广，团队标准建设（研发流程标准化、文档标准化、分支管理等）。


---

### 华宇信息技术有限公司（2019.12-2022.01）

+ 岗位：Java 开发工程师。

+ 参与公司核心业务开发与维护。

+ 负责团队开发工作中的设计评审、code review 等工作。

+ 参与现场疑难问题处理，性能优化等工作。

+ 组织技术分享（基准测试、GC、ThreadLocal），帮助团队技术能力提升，营造学习氛围。

+ 开发辅助工具（表结构在线管理系统，在线dump heap），提升团队工作效率，并获得创新奖。

---

## 项目经验

### 云平台（2022.02-至今）

+ 为满足企业客户就近接入安全服务，我司在多个IaaS部署安全服务集群。云平台负责统一纳管多个 K8s 集群，集中管理数据安全产品服务。	

+ 具体功能：集群基本信息管理、资源监控、**跨集群认证**、日志收集配置、Web 终端；租户的实时资源使用收集、各服务运行监控；安全产品服务**资源定义**、版本控制、接口测试；租户独立升级、降级安全产品服务；K8s 资源可视化展示、修改。

  > 云平台录入集群，生成凭据，下发，configmap，watch，etcd。调用，网关，etcd。网络，重试机制，启用禁用，任务，通知 job，站内信。

+ 集成 Grafana，对产品服务进行监控可视化。上报业务监控指标到 Prometheus，结合 Grafana 实现服务异常告警。

+ **集群问题排查**，解决容器资源占用异常、容器性能差等问题。

  > 资源限制不合理，没有考虑 pagecache，memory cgroup。request 太小
  >
  > ApiSix，不同集群，内存，oom，节点资源丰富。大量nginx进程，limit cpu，top，/proc/state。深入学习 cgroup，k8s cadvisor，lxcfs。
  
+ 涉及技术：Client-go，Operator，Kubebuilder，K8s，Prometheus，Grafana，ApiSix，Kratos，Gorm，Wire，Grpc，Postgresql 等。

---

### 风险网站识别系统（2023.01-2023.06）

+ 企业内部**流量拦截**，对员工访问的网站进行识别、分析、风险阻断。

  > 代理设备、解析流量、https、七层代理、信任证书、sftp

+ 提供**高性能**的 url 安全性查询功能，对网站进行动态分类，0day 钓鱼分析，安全扫描等操作。

  > urlsdk，云端，缓存，预读。时效性，md5。淘汰机制。
  >
  > 重构后，增加内网查询客户端，增量同步。
  >
  > Bbolt，B+树，搜索树，降低高度，减少 io 次数，范围查询，查 site。内嵌数据库。LevelDb。Redis，体积大，fork，不支持范围查询，keys，scan。

+ 从多个安全数据源同步数据，解析、过滤，并按照策略、优先级进行整合入库。

  > 各自的es 索引，整合消息，mq 防止突发流量，监控mq 消息数量。

+ 涉及技术：Bbolt，Redis，Kratos，Kafka，ES，Grpc，Postgresql，K8S，ApiSix 等。

#### 业绩

+ 重构单体应用，梳理业务，重新架构设计，服务拆分。重构后，云端服务整体**资源占用减少 30%。**

  > 0day钓鱼系统重构

+ 重构的服务上线前，通过**复制生产环境流量**，验证重构后服务的准确性，保证服务质量。

+ 优化查询逻辑，**减少网络请求**。 解决突发流量时，爬虫服务占用带宽高的问题。
  
  > 预读、md5、缓存、批量处理
  >
  > 通过队列 + 动态协程池解决突发流量时，爬虫服务占用带宽高的问题。
  >
  > 业务背景，0day钓鱼系统重构，重构前：1.不好维护；2.扩容后资源利用率不高；3.爬取占用带宽。
  > 包含的功能：1.url 去重；2.过滤(域名注册时间，分类为银行)；3.分析(模板匹配)；4.入库，整合；5.定时
  >
  > 服务拆分思路：1.抽取核心功能；2.入库、整合；3.流程控制；4.定时
  >
  > 重构带来的好处：1.流程控制服务加入队列；2.单节点去重不依赖redis；3.核心服务扩容，前面的队列起缓存作用；4.批量入库，优雅退出
  
+ 因数据量大，库里有上亿条安全 URL，在请求量大的时候查询效率低。深入理解业务后，运用**布隆过滤器 + single fly**，拦截大部分查询请求查库，提升了查询效率。
  
  > map+锁，waitgroup


---

### 统一认证鉴权系统（2022.06-2022.12）

+ 产品应用在上云前，都是各自负责自身系统的认证鉴权，并且产品应用具有多种语言实现。上云后，结合 ApiSix 网关的能力，对南北流量进行统一管理，于是认证、鉴权、单点登录、审计等功能就可以抽取到基础设施。

+ 此系统提供应用管理、账号管理、角色管理、API 权限管理（基于 casbin 实现）、UI 权限管理、审计日志（保存到 es）等功能。

+ 涉及技术：Kratos，Casbin，Gorm，ES，JWT，Grpc，Redis，Postgresql，K8s，ApiSix 等。

#### 业绩

+ 我是该项目的 **Owner**，负责技术选型、架构设计、分工安排。

  > 为什么选择 ES？
  >
  > ApiSix 选型：1可扩展、自定义插件、证书双向认证、租户 ID。2动态实时性、etcd watch、kong5秒钟。3社区活跃度。4 可用性。5性能、nginx luaJIT。envoy？？？
  >
  > Casbin 选型todo

+ 根据**关注点分离**的设计思想，将项目拆分为负责命令操作的 admin 模块，和负责查询操作的 service 模块。service 模块处于**流量热点**，结合 K8S 弹性伸缩，提升资源利用率。

  > cpu 瓶颈，接口多，类似正则的接口匹配
  >
  > admin 维护数据，pg，service 查询，做认证鉴权。本地缓存。事件同步数据，发布订阅。

+ 使用 Redis 实现**分布式锁**，保证修改数据时并发安全。

  > SETNX 和 EXPIRE 非原子性；锁误解除；超时解锁导致并发；无法等待锁释放：轮训、发布订阅；主从负责，数据丢失，RedLock；脑裂，客户端日志，N 个健康的从库，数据复制时的 ACK 超时；乐观锁，CAS，redis watch 事务

+ 对热点数据预处理，使用本地缓存 + Redis 发布订阅的**缓存设计**，提升系统性能。

  > 鉴权、url匹配、效率、缓存。redis 大key、单线程、IO 多路复用。admin 修改、发布订阅
  >

---

### 基于 Gitlab CI/CD 进行 DevOps 改造（2022.05-2022.07）

+ [博客文章](https://yuyy.info/?cat=80)

+ 前端应用、后端应用代码检查、自动化测试、构建镜像、部署到对应的 K8s 集群。

+ 基础镜像 Dcokerfile 集中管理，结合 Gitlab CI，高效构建镜像。
  
+ API 大仓，统一管理公司所有接口定义 protocol buffer 文件，提高跨团队沟通效率。结合 Gitlab CI，自动生成接口代码。

+ 搭建公共 CI/CD 脚本库，降低使用难度，提升可维护性。

---

### 数字法院审判系统（2019.12-2022.02）

+ 系统涉及多个模块，立案系统、审判系统、统计分析、文印系统、审批平台、案件查询、案件详情等。

+ 法院审判系统需求开发，日常系统维护，现场问题排查。

+ 业务复杂，项目庞大，涉及上百个微服务。现场生产环境经常卡顿严重，对这类问题的及时响应，定期做应用巡检，程序性能优化。

  > 慢 sql、arthas 分析调用链路及耗时

+ 团队技术把控，承担小组设计评审，代码审查工作，并对一些疑难问题进行攻克和解答。

+ 带领 5 人团队，完成甘肃定西市审判系统切换，数据迁移等工作。

+ 解决生产环境 CPU 飙升、内存泄露、系统响应慢等问题。

  > CPU 飙升
  >
  > 高并发场景下多层嵌套循环查询配置
  >
  > while(true)从非阻塞队列里获取元素，改为使用阻塞队列。CPU100%一直没人发现，因为我们现在的CPU都是多核的，这个线程最多也就会占满一核
  >
  > 内存 OOM：mat分析dump的堆，文书模板缓存初始化多份，锁的对象每次都是new的，改成初始化加载，避免影响客户使用
  >
  > 错误使用不支持并发操作的LRUMap，导致LRUMap里存了2w多个文书内容
  >
  > 内存泄露导致 full gc 频率高
  >
  > 接口缓慢：
  >
  > 1、通过慢 sql 日志找出慢 sql，然后建立适当的索引，一些结果的过滤尽量使用代码实现，增加冗余字段，减少 SQL 的复杂度，提升 sql 查询速度。
  >
  > 2、利用 arthas 排查调用链路及耗时，发现 BFF 层服务串行调用下游服务，通过深入理解需求，将这块重构为并发调用下游服务获取数据。

+ 涉及技术：SpringCloud，SpringBoot，Mybatis，Redis，Postgresql，RocketMQ，Eureka，Ribbon，Hystrix，OpenFeign，ES，K8S等。

---

## 专业技能

+ 熟悉 K8S，多集群管理，集群间通信认证，多租户，熟练使用 kubectl debug、nsenter 排查集群问题。

+ 熟练使用 Client-go，并且拥有云平台开发经验，开发 Operator 管理集群资源。熟悉循环控制模式，Informer 源码分析，并发表博客。

+ 熟悉容器技术，理解 Namespace，Cgroups，熟悉容器子进程管理，容器网络问题排查，集群网络以及 K8S CNI 插件。处理线上容器相关问题，例如容器资源占用异常，容器性能差等。

+ 熟练掌握 Go 语言相关知识，熟练使用 Kratos(B 站开源的微服务框架，类似 Gin)、Gorm、gRPC、ProtocolBuffer 等开源框架，并且拥有多个微服务项目经验。

+ 熟练掌握 Java 语言相关知识，熟练使用 SpringBoot、Mybatis、SpringCloud、Eureka、Ribbon、OpenFeign、Shiro 等开源框架，并且拥有多个大型项目经验。

+ 熟练使用线上诊断工具 Arthas(Java)，PProf(Go) 具备丰富的线上问题排查经验。

+ 熟悉数据结构和基础算法，LeetCode 题量 200+ 。

+ 具备良好的代码设计能力，熟练使用设计模式、设计原则，具有重构大型项目的经验。

+ 熟练使用 MySQL 数据库，了解 Innodb 的事务隔离、索引、日志，对项目中索引的创建有一定的经验。

+ 对于 Redis 的底层数据结构、主从、集群部署有一定的了解，解决过项目中redis 的一些问题，例如缓存穿透、卡顿、慢查询等，研究过 Redis 实现分布式锁。

  > 使用管道优化批量命令、删除 key 时使用scan 代替 keys

+ 熟悉 DevOps，Gitlab CI/CD、Jenkins。

+ 熟悉 Linux、Docker、K8S，个人主力电脑也是 Linux 系统。

+ 掌握前端基础知识、Vue 框架。

---

## 教育背景

2016.09-2020.06

+ 重庆交通大学 / 计算机科学与技术 / 本科

---

## 奖项证书

+ 华宇信息第一届**编程大赛** 季军
+ 华宇信息2020届“最佳新人”
+ 英语四级
+ 第九届大学生**程序设计大赛** 二等奖
+ 第五届中国互联网+大学生创新创业大赛重庆交通大学校赛 三等奖
+ 第十届**蓝桥杯**全国软件和信息技术专业人才大赛重庆赛区 C/C++程序设计大学 B 组 二等奖

---

## 自我评价

+ 我是一个喜欢折腾，对生活和技术充满热情的人，平时玩 **NAS、软路由、搭建个人博客**等。
+ 对云原生方向感兴趣，目前处于**参与k8s开源贡献的起步阶段**，已被合并了一个PR。
+ 平时爱看技术文章，编写个人博客，具有良好的文档编写能力，适应能力，做事积极性高。
